import React, { useEffect, useRef, useState } from 'react';
import './App.css';

function App() {
  // ìƒ˜í”Œ ë¡œê·¸ ë°ì´í„°
  const logData = [
    {
      id: 1,
      name: 'APIGen ë¡œê·¸',
      timestamp: '2024-01-15 14:30:25',
      level: 'INFO',
      message: 'ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \n ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \nì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œë˜ê³  ìˆìœ¼ë©°, ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ë„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ ì„œë¹„ìŠ¤ì™€ API ê²Œì´íŠ¸ì›¨ì´ë„ ì •ìƒ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. \n',
      service: 'Web Server',
      status: 'success'
    }
  ];

  const [logMessage, setLogMessage] = useState("");
  const logRef = useRef(null);

  const [currentLogIndex, setCurrentLogIndex] = useState(0);
  const currentLog = logData[currentLogIndex];

  const selectLog = (index) => {
    setCurrentLogIndex(index);

    if(index === 0) {
      const eventSource = new EventSource("http://localhost:8080/sse");

      eventSource.onmessage = (message) => {
        const receive = JSON.parse(message.data);
        if(receive.message == undefined) {
          return;
        }

        setLogMessage(prev => prev + receive.message + "\n");
      }

      eventSource.onerror = (err) => {
        console.log("SSE ì˜¤ë¥˜ : " , err);
        eventSource.close();
      }
    }
  };

  useEffect(() => {
    logRef.current.scrollTop = logRef.current.scrollHeight;
  }, [logMessage]);

  

  return (
    <div className="App">
      <div className="container">
        <header className="header">
          <h1 className="title">
            <span className="icon">ğŸ“Š</span>
            ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
          </h1>
          <p className="subtitle">ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
        </header>

        <div className="content-wrapper">
          {/* ì‚¬ì´ë“œë°” */}
          <aside className="sidebar">
            <h3 className="sidebar-title">ë¡œê·¸ ëª©ë¡</h3>
            <div className="log-list">
              {logData.map((log, index) => (
                <button
                  key={log.id}
                  className={`log-item ${index === currentLogIndex ? 'active' : ''}`}
                  onClick={() => selectLog(index)}
                >
                  <span className="log-name">{log.name}</span>
                  <span className="log-time">{log.timestamp.split(' ')[1]}</span>
                </button>
              ))}
            </div>
          </aside>

          {/* ë©”ì¸ ì½˜í…ì¸  */}
          <main className="main-content">
            <div className="log-card">
              <div className="log-header">
                <div className="log-info">
                  <span className="log-number">#{currentLog.id}</span>
                  <span className={`log-level log-${currentLog.level.toLowerCase()}`}>
                    {currentLog.level}
                  </span>
                </div>
                <div className="log-timestamp">{currentLog.timestamp}</div>
              </div>

              <div className="log-content">
                <div className="log-data" ref={logRef}>
                  <pre className="log-text">{logMessage}</pre>
                </div>
              </div>
            </div>
          </main>
        </div>

        <footer className="footer">
          <p>ëª¨ë“  ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê³  ìˆìŠµë‹ˆë‹¤ ğŸš€</p>
        </footer>
      </div>
    </div>
  );
}

export default App;
